<!-- Main Content -->
<main class="main-content">
    <!-- Dashboard Page -->
    <div id="dashboard-page" class="page active">
        <div class="page-header">
            <h2>Dashboard</h2>
            <div class="header-actions">
                <button class="btn btn-primary" id="add-trade-btn">+ Add Trade</button>
            </div>
        </div>

        <!-- Metrics Grid -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-label">Net P/L</div>
                <div class="metric-value" id="metric-net-pl">$0.00</div>
                <div class="metric-change" id="metric-net-pl-change"></div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Win Rate</div>
                <div class="metric-value" id="metric-win-rate">0%</div>
                <div class="metric-change" id="metric-win-rate-change"></div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Expectancy</div>
                <div class="metric-value" id="metric-expectancy">$0.00</div>
                <div class="metric-change" id="metric-expectancy-change"></div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Profit Factor</div>
                <div class="metric-value" id="metric-profit-factor">0.00</div>
                <div class="metric-change" id="metric-profit-factor-change"></div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Max Drawdown</div>
                <div class="metric-value" id="metric-max-drawdown">$0.00</div>
                <div class="metric-change" id="metric-max-drawdown-change"></div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Avg Win/Loss</div>
                <div class="metric-value" id="metric-avg-win-loss">0.00</div>
                <div class="metric-change" id="metric-avg-win-loss-change"></div>
            </div>
        </div>

        <!-- Charts Row -->
        <div class="charts-row">
            <div class="chart-container">
                <h3>Equity Curve</h3>
                <canvas id="equity-chart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Win/Loss Distribution</h3>
                <canvas id="winloss-chart"></canvas>
            </div>
        </div>

        <!-- Recent Trades -->
        <div class="section">
            <h3>Recent Trades</h3>
            <div class="table-container">
                <table class="data-table" id="recent-trades-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Symbol</th>
                            <th>Side</th>
                            <th>Quantity</th>
                            <th>Entry</th>
                            <th>Exit</th>
                            <th>P/L</th>
                            <th>Strategy</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Trades Page -->
    <div id="trades-page" class="page">
        <div class="page-header">
            <h2>All Trades</h2>
            <div class="header-actions">
                <input type="text" id="trade-search" placeholder="Search trades..." class="search-input">
                <select id="trade-filter" class="filter-select">
                    <option value="all">All Trades</option>
                    <option value="winning">Winning</option>
                    <option value="losing">Losing</option>
                    <option value="breakeven">Breakeven</option>
                </select>
                <button class="btn btn-primary" id="add-trade-btn-2">+ Add Trade</button>
            </div>
        </div>

        <div class="table-container">
            <table class="data-table" id="all-trades-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Symbol</th>
                        <th>Side</th>
                        <th>Quantity</th>
                        <th>Entry Price</th>
                        <th>Exit Price</th>
                        <th>P/L</th>
                        <th>R-Multiple</th>
                        <th>Strategy</th>
                        <th>Tags</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- Reports Page -->
    <div id="reports-page" class="page">
        <div class="page-header">
            <h2>Reports & Analytics</h2>
            <div class="header-actions">
                <select id="report-type" class="filter-select">
                    <option value="drawdown">Drawdown Analysis</option>
                    <option value="risk_reward">Risk/Reward Analysis</option>
                    <option value="tag_performance">Tag Performance</option>
                    <option value="performance_time">Performance Over Time</option>
                    <option value="day_of_week">Day of Week Analysis</option>
                    <option value="strategy_comparison">Strategy Comparison</option>
                    <option value="time_of_day">Time of Day Analysis</option>
                </select>
                <button class="btn btn-secondary" id="export-report-btn">Export Report</button>
            </div>
        </div>

        <div class="report-container">
            <div class="chart-container large">
                <canvas id="report-chart"></canvas>
            </div>
            <div class="report-stats" id="report-stats"></div>
        </div>
    </div>

    <!-- Playbooks Page -->
    <div id="playbooks-page" class="page">
        <div class="page-header">
            <h2>Trading Playbooks</h2>
            <div class="header-actions">
                <button class="btn btn-primary" id="add-playbook-btn">+ New Playbook</button>
            </div>
        </div>

        <div class="playbooks-grid" id="playbooks-grid"></div>
    </div>

    <!-- Journal Page -->
    <div id="journal-page" class="page">
        <div class="page-header">
            <h2>Trading Journal</h2>
            <div class="header-actions">
                <button class="btn btn-primary" id="add-journal-btn">+ New Entry</button>
            </div>
        </div>

        <div class="journal-entries" id="journal-entries"></div>
    </div>

    <!-- GL University Page -->
    <div id="university-page" class="page">
        <div class="page-header">
            <h2>GL University</h2>
            <p class="page-subtitle">Educational Resources for Trading Excellence</p>
        </div>

        <div class="university-grid">
            <div class="course-card">
                <div class="course-icon">ðŸ“Š</div>
                <h3>Risk Management Fundamentals</h3>
                <p>Learn the essential principles of position sizing, stop losses, and portfolio risk management.</p>
                <div class="course-meta">
                    <span>8 Lessons</span>
                    <span>Beginner</span>
                </div>
                <button class="btn btn-outline">Start Learning</button>
            </div>

            <div class="course-card">
                <div class="course-icon">ðŸ“ˆ</div>
                <h3>Technical Analysis Mastery</h3>
                <p>Master chart patterns, indicators, and price action trading strategies.</p>
                <div class="course-meta">
                    <span>12 Lessons</span>
                    <span>Intermediate</span>
                </div>
                <button class="btn btn-outline">Start Learning</button>
            </div>

            <div class="course-card">
                <div class="course-icon">ðŸ§ </div>
                <h3>Trading Psychology</h3>
                <p>Develop mental discipline, emotional control, and winning trading habits.</p>
                <div class="course-meta">
                    <span>10 Lessons</span>
                    <span>All Levels</span>
                </div>
                <button class="btn btn-outline">Start Learning</button>
            </div>

            <div class="course-card">
                <div class="course-icon">ðŸ’°</div>
                <h3>Options Trading Strategies</h3>
                <p>Understand options mechanics, spreads, and advanced trading strategies.</p>
                <div class="course-meta">
                    <span>15 Lessons</span>
                    <span>Advanced</span>
                </div>
                <button class="btn btn-outline">Start Learning</button>
            </div>

            <div class="course-card">
                <div class="course-icon">ðŸŽ¯</div>
                <h3>Building Trading Systems</h3>
                <p>Create, backtest, and optimize profitable trading systems and strategies.</p>
                <div class="course-meta">
                    <span>10 Lessons</span>
                    <span>Advanced</span>
                </div>
                <button class="btn btn-outline">Start Learning</button>
            </div>

            <div class="course-card">
                <div class="course-icon">ðŸ“‰</div>
                <h3>Market Analysis & Research</h3>
                <p>Develop skills in fundamental analysis, market research, and trade idea generation.</p>
                <div class="course-meta">
                    <span>9 Lessons</span>
                    <span>Intermediate</span>
                </div>
                <button class="btn btn-outline">Start Learning</button>
            </div>
        </div>

        <div class="section" style="margin-top: 3rem;">
            <h3>Trading Resources</h3>
            <div class="resources-grid">
                <div class="resource-item">
                    <h4>ðŸ“š Reading List</h4>
                    <ul>
                        <li>Trading in the Zone - Mark Douglas</li>
                        <li>Market Wizards - Jack Schwager</li>
                        <li>Reminiscences of a Stock Operator - Edwin LefÃ¨vre</li>
                        <li>The Disciplined Trader - Mark Douglas</li>
                    </ul>
                </div>
                <div class="resource-item">
                    <h4>ðŸ”— Useful Links</h4>
                    <ul>
                        <li><a href="#">TradingView - Charting Platform</a></li>
                        <li><a href="#">Finviz - Market Screener</a></li>
                        <li><a href="#">Investopedia - Education</a></li>
                        <li><a href="#">SEC EDGAR - Filings</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Page -->
    <div id="settings-page" class="page">
        <div class="page-header">
            <h2>Settings</h2>
        </div>

        <div class="settings-container">
            <div class="settings-section">
                <h3>General Settings</h3>
                <div class="setting-item">
                    <label>Platform Name</label>
                    <input type="text" id="setting-platform-name" value="GLTRADES" class="setting-input">
                </div>
                <div class="setting-item">
                    <label>Default Currency</label>
                    <select id="setting-currency" class="setting-input">
                        <option value="USD" selected>USD</option>
                        <option value="EUR">EUR</option>
                        <option value="GBP">GBP</option>
                        <option value="JPY">JPY</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label>Primary Brand Color</label>
                    <input type="color" id="setting-brand-color" value="#10b981" class="setting-input">
                </div>
            </div>

            <div class="settings-section">
                <h3>Features</h3>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="setting-educational" checked>
                        Enable Educational Content (GL University)
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="setting-sample-data" checked>
                        Include Sample Data
                    </label>
                </div>
            </div>

            <div class="settings-section">
                <h3>Data Management</h3>
                <div class="setting-item">
                    <button class="btn btn-secondary" id="export-data-btn">Export All Data</button>
                    <button class="btn btn-secondary" id="import-data-btn">Import Data</button>
                    <button class="btn btn-danger" id="reset-data-btn">Reset All Data</button>
                </div>
            </div>

            <div class="settings-section">
                <button class="btn btn-primary" id="save-settings-btn">Save Settings</button>
            </div>
        </div>
    </div>
</main>

<!-- Add Trade Modal -->
<div id="trade-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modal-title">Add Trade</h3>
            <button class="modal-close" id="close-modal">&times;</button>
        </div>
        <form id="trade-form">
            <div class="form-grid">
                <div class="form-group">
                    <label>Date</label>
                    <input type="date" id="trade-date" required>
                </div>
                <div class="form-group">
                    <label>Symbol</label>
                    <input type="text" id="trade-symbol" placeholder="AAPL" required>
                </div>
                <div class="form-group">
                    <label>Side</label>
                    <select id="trade-side" required>
                        <option value="long">Long</option>
                        <option value="short">Short</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantity</label>
                    <input type="number" id="trade-quantity" placeholder="100" required>
                </div>
                <div class="form-group">
                    <label>Entry Price (USD)</label>
                    <input type="number" step="0.01" id="trade-entry" placeholder="150.00" required>
                </div>
                <div class="form-group">
                    <label>Exit Price (USD)</label>
                    <input type="number" step="0.01" id="trade-exit" placeholder="155.00" required>
                </div>
                <div class="form-group">
                    <label>Stop Loss (USD)</label>
                    <input type="number" step="0.01" id="trade-stop" placeholder="148.00">
                </div>
                <div class="form-group">
                    <label>Strategy</label>
                    <input type="text" id="trade-strategy" placeholder="Momentum">
                </div>
                <div class="form-group full-width">
                    <label>Tags (comma separated)</label>
                    <input type="text" id="trade-tags" placeholder="earnings, breakout">
                </div>
                <div class="form-group full-width">
                    <label>Notes</label>
                    <textarea id="trade-notes" rows="3" placeholder="Trade notes..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancel-trade-btn">Cancel</button>
                <button type="submit" class="btn btn-primary">Save Trade</button>
            </div>
        </form>
    </div>
</div>

<!-- Add Playbook Modal -->
<div id="playbook-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>New Playbook</h3>
            <button class="modal-close" id="close-playbook-modal">&times;</button>
        </div>
        <form id="playbook-form">
            <div class="form-group">
                <label>Playbook Name</label>
                <input type="text" id="playbook-name" placeholder="Momentum Breakout" required>
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="playbook-description" rows="3" placeholder="Strategy description..." required></textarea>
            </div>
            <div class="form-group">
                <label>Entry Criteria</label>
                <textarea id="playbook-entry" rows="3" placeholder="Entry conditions..." required></textarea>
            </div>
            <div class="form-group">
                <label>Exit Criteria</label>
                <textarea id="playbook-exit" rows="3" placeholder="Exit conditions..." required></textarea>
            </div>
            <div class="form-group">
                <label>Risk Management</label>
                <textarea id="playbook-risk" rows="3" placeholder="Risk rules..." required></textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancel-playbook-btn">Cancel</button>
                <button type="submit" class="btn btn-primary">Save Playbook</button>
            </div>
        </form>
    </div>
</div>

<!-- Add Journal Modal -->
<div id="journal-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>New Journal Entry</h3>
            <button class="modal-close" id="close-journal-modal">&times;</button>
        </div>
        <form id="journal-form">
            <div class="form-group">
                <label>Date</label>
                <input type="date" id="journal-date" required>
            </div>
            <div class="form-group">
                <label>Title</label>
                <input type="text" id="journal-title" placeholder="Trading session recap" required>
            </div>
            <div class="form-group">
                <label>Entry</label>
                <textarea id="journal-entry" rows="10" placeholder="What did you learn today?" required></textarea>
            </div>
            <div class="form-group">
                <label>Mood</label>
                <select id="journal-mood">
                    <option value="excellent">Excellent</option>
                    <option value="good">Good</option>
                    <option value="neutral" selected>Neutral</option>
                    <option value="poor">Poor</option>
                    <option value="frustrated">Frustrated</option>
                </select>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancel-journal-btn">Cancel</button>
                <button type="submit" class="btn btn-primary">Save Entry</button>
            </div>
        </form>
    </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<!-- Firebase Config -->
<script src="firebase-config.js"></script>

<!-- Authentication -->
<script src="js/auth.js"></script>

<!-- Main App (loaded after auth check) -->
<script src="js/app.js"></script>
