<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GLTRADES | Intelligence System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #09090b; color: #fafafa; margin: 0; }
        .glass-card { background: rgba(18, 18, 20, 0.8); border: 1px solid rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); }
        
        /* Navigation Styles */
        .sidebar-link { transition: all 0.2s; cursor: pointer; border-left: 3px solid transparent; }
        .sidebar-link.active-nav { border-left: 3px solid #3b82f6; background: rgba(59, 130, 246, 0.08); color: #3b82f6 !important; }
        
        /* Page Control */
        .page-view { display: none; }
        .page-view.active { display: block; animation: fadeIn 0.2s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        #tradeModal { background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); }
        input { background: #18181b !important; border: 1px solid #27272a !important; color: white !important; }
    </style>
</head>
<body class="flex min-h-screen overflow-hidden">

    <aside class="w-64 border-r border-white/5 flex flex-col bg-[#09090b] h-screen">
        <div class="p-8">
            <h1 class="text-xl font-bold tracking-tighter text-white uppercase italic">GL<span class="text-blue-500">TRADES</span></h1>
        </div>
        
        <nav class="flex-1 px-4 space-y-2">
            <div onclick="navigateTo('dashboard', this)" class="sidebar-link active-nav flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-zinc-400">
                <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard
            </div>
            <div onclick="navigateTo('tradelog', this)" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-zinc-400">
                <i data-lucide="book-open" class="w-4 h-4"></i> Trade Log
            </div>
            <div onclick="navigateTo('analytics', this)" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-zinc-400">
                <i data-lucide="bar-chart-3" class="w-4 h-4"></i> Analytics
            </div>
        </nav>
    </aside>

    <main class="flex-1 overflow-y-auto">
        <header class="h-20 border-b border-white/5 flex items-center justify-between px-10 sticky top-0 bg-[#09090b]/90 backdrop-blur-md z-40">
            <h2 id="current-view-title" class="text-lg font-medium">Dashboard</h2>
            <button onclick="document.getElementById('tradeModal').classList.remove('hidden')" class="px-5 py-2.5 bg-white text-black text-xs font-bold rounded-lg hover:bg-zinc-200 transition-all">
                + ADD TRADE
            </button>
        </header>

        <div id="dashboard" class="page-view active p-10 max-w-7xl mx-auto space-y-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="glass-card p-8 rounded-2xl">
                    <span class="text-zinc-500 text-xs font-bold uppercase tracking-widest">Total P&L</span>
                    <h3 id="stat-pnl" class="text-4xl font-bold mt-2">$0.00</h3>
                </div>
                <div class="glass-card p-8 rounded-2xl">
                    <span class="text-zinc-500 text-xs font-bold uppercase tracking-widest">Win Rate</span>
                    <h3 id="stat-winrate" class="text-4xl font-bold mt-2">0%</h3>
                </div>
                <div class="glass-card p-8 rounded-2xl">
                    <span class="text-zinc-500 text-xs font-bold uppercase tracking-widest">Trades Logged</span>
                    <h3 id="stat-count" class="text-4xl font-bold mt-2">0</h3>
                </div>
            </div>
            
            <div class="glass-card rounded-2xl overflow-hidden p-2 text-center">
                <div class="p-20 text-zinc-600 font-bold uppercase text-xs tracking-tighter">
                    Data will visualize here once you log your first 3 trades
                </div>
            </div>
        </div>

        <div id="tradelog" class="page-view p-10 max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Execution History</h3>
                <button onclick="localStorage.clear(); location.reload();" class="text-red-500 text-[10px] font-bold uppercase">Reset System</button>
            </div>
            <div class="glass-card rounded-2xl overflow-hidden">
                <table class="w-full text-left text-sm">
                    <thead class="border-b border-white/5 bg-white/5 text-zinc-400">
                        <tr><th class="p-5">Ticker</th><th class="p-5">Side</th><th class="p-5">Result</th><th class="p-5 text-right">Net P/L</th></tr>
                    </thead>
                    <tbody id="log-table-body">
                        </tbody>
                </table>
            </div>
        </div>

        <div id="analytics" class="page-view p-10 max-w-7xl mx-auto">
            <h3 class="text-2xl font-bold">Analytics</h3>
            <div class="glass-card mt-10 p-40 text-center text-zinc-700">Analytics engine pending data...</div>
        </div>
    </main>

    <div id="tradeModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4">
        <div class="glass-card w-full max-w-md p-10 rounded-3xl border-blue-500/20">
            <h3 class="text-xl font-bold mb-6 italic">Enter New Trade</h3>
            <form id="tradeForm" class="space-y-4">
                <input type="text" id="symbol" placeholder="Ticker (e.g. NAS100)" class="w-full p-4 rounded-xl outline-none" required>
                <select id="side" class="w-full bg-zinc-900 border border-zinc-800 p-4 rounded-xl text-white outline-none">
                    <option value="LONG">LONG</option>
                    <option value="SHORT">SHORT</option>
                </select>
                <input type="number" id="pnl" step="any" placeholder="Net Profit/Loss ($)" class="w-full p-4 rounded-xl outline-none" required>
                <div class="flex gap-4 pt-4">
                    <button type="button" onclick="document.getElementById('tradeModal').classList.add('hidden')" class="flex-1 text-zinc-500 font-bold uppercase text-xs">Cancel</button>
                    <button type="submit" class="flex-1 bg-blue-600 text-white py-4 rounded-xl font-bold uppercase text-xs">Save Trade</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // 1. NAVIGATION ENGINE
        function navigateTo(pageId, element) {
            // Hide all pages
            const pages = document.querySelectorAll('.page-view');
            pages.forEach(p => p.classList.remove('active'));
            
            // Show the one we want
            document.getElementById(pageId).classList.add('active');
            
            // Reset nav button styles
            const navs = document.querySelectorAll('.sidebar-link');
            navs.forEach(n => n.classList.remove('active-nav'));
            element.classList.add('active-nav');
            
            // Update Title
            document.getElementById('current-view-title').innerText = pageId.toUpperCase();
        }

        // 2. DATA ENGINE
        let tradeData = JSON.parse(localStorage.getItem('gl_storage')) || [];

        function saveTrade(e) {
            e.preventDefault();
            const trade = {
                id: Date.now(),
                symbol: document.getElementById('symbol').value.toUpperCase(),
                side: document.getElementById('side').value,
                pnl: parseFloat(document.getElementById('pnl').value)
            };
            
            tradeData.unshift(trade);
            localStorage.setItem('gl_storage', JSON.stringify(tradeData));
            
            document.getElementById('tradeForm').reset();
            document.getElementById('tradeModal').classList.add('hidden');
            refreshUI();
        }

        function refreshUI() {
            const total = tradeData.reduce((acc, t) => acc + t.pnl, 0);
            const winCount = tradeData.filter(t => t.pnl > 0).length;
            const rate = tradeData.length > 0 ? ((winCount / tradeData.length) * 100).toFixed(1) : 0;

            // Update Dash
            document.getElementById('stat-pnl').innerText = (total >= 0 ? '+$' : '-$') + Math.abs(total).toFixed(2);
            document.getElementById('stat-pnl').style.color = total >= 0 ? '#10b981' : '#ef4444';
            document.getElementById('stat-winrate').innerText = rate + '%';
            document.getElementById('stat-count').innerText = tradeData.length;

            // Update Table
            const body = document.getElementById('log-table-body');
            body.innerHTML = tradeData.map(t => `
                <tr class="border-b border-white/5">
                    <td class="p-5 font-bold">${t.symbol}</td>
                    <td class="p-5 text-xs text-zinc-500">${t.side}</td>
                    <td class="p-5 ${t.pnl >= 0 ? 'text-emerald-500' : 'text-red-500'} font-bold">${t.pnl >= 0 ? 'WIN' : 'LOSS'}</td>
                    <td class="p-5 text-right font-mono ${t.pnl >= 0 ? 'text-emerald-400' : 'text-red-400'}">${t.pnl >= 0 ? '+' : ''}${t.pnl}</td>
                </tr>
            `).join('');
        }

        // Initialize
        document.getElementById('tradeForm').addEventListener('submit', saveTrade);
        lucide.createIcons();
        refreshUI();
    </script>
</body>
</html>
